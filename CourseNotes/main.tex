%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% The Legrand Orange Book
% LaTeX Template
% Version 2.1 (14/11/15)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Mathias Legrand (legrand.mathias@gmail.com) with modifications by:
% Vel (vel@latextemplates.com)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
% Compiling this template:
% This template uses biber for its bibliography and makeindex for its index.
% When you first open the template, compile it from the command line with the 
% commands below to make sure your LaTeX distribution is configured correctly:
%
% 1) pdflatex main
% 2) makeindex main.idx -s StyleInd.ist
% 3) biber main
% 4) pdflatex main x 2
%
% After this, when you wish to update the bibliography/index use the appropriate
% command above and make sure to compile with pdflatex several times 
% afterwards to propagate your changes to the document.
%
% This template also uses a number of packages which may need to be
% updated to the newest versions for the template to compile. It is strongly
% recommended you update your LaTeX distribution if you have any
% compilation errors.
%
% Important note:
% Chapter heading images should have a 2:1 width:height ratio,
% e.g. 920px width and 460px height.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[11pt,fleqn]{book} % Default font size and left-justified equations

\newcommand{\TBC} {\vspace {1em} \noindent [SAMPLE TEXT. TO BE COMPLETED IN THE FINAL VERSION.] \vspace {1em}}

%----------------------------------------------------------------------------------------

\input{structure} % Insert the commands.tex file which contains the majority of the structure behind the template
\input{macros}
\begin{document}

%----------------------------------------------------------------------------------------
%	TITLE PAGE
%----------------------------------------------------------------------------------------

\begingroup
\thispagestyle{empty}
\begin{tikzpicture}[remember picture,overlay]
\coordinate [below=12cm] (midpoint) at (current page.north);
\node at (current page.north west)
{\begin{tikzpicture}[remember picture,overlay]
\node[anchor=north west,inner sep=0pt] at (0,0) {\includegraphics[width=\paperwidth]{background}}; % Background image
\draw[anchor=north] (midpoint) node [fill=ocre!30!white,fill opacity=0.6,text opacity=1,inner sep=1cm]
  {\Huge\centering\bfseries\sffamily\parbox[c][][t]{\paperwidth}
   {\centering Fourier Analysis of Sampling Patterns \\ for Rendering: Theory and Practice \\[15pt] % Book title
   {\Large Understanding estimation error in Monte Carlo Image Synthesis}\\[20pt] % Subtitle
   {\huge Kartic Subr, Wojciech Jarosz and Gurprit Singh}}}; % Author name
\end{tikzpicture}};
\end{tikzpicture}
\vfill
\endgroup

%----------------------------------------------------------------------------------------
%	COPYRIGHT PAGE
%----------------------------------------------------------------------------------------

\newpage
~\vfill
\thispagestyle{empty}

\noindent Copyright \copyright\ 2016 XXXX\\ % Copyright notice

\noindent \textsc{Published by Publisher}\\ % Publisher

\noindent \textsc{Best-Course.com}\\ % URL

\noindent Licensed under the Creative Commons Attribution-NonCommercial 3.0 Unported License (the ``License''). You may not use this file except in compliance with the License. You may obtain a copy of the License at \url{http://creativecommons.org/licenses/by-nc/3.0}. Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an \textsc{``as is'' basis, without warranties or conditions of any kind}, either express or implied. See the License for the specific language governing permissions and limitations under the License.\\ % License information

% \noindent \textit{First printing, March 2013} % Printing/edition date

%----------------------------------------------------------------------------------------
%	TABLE OF CONTENTSPic	
%----------------------------------------------------------------------------------------

\chapterimage{temp.pdf} % Table of contents heading image

\pagestyle{empty} % No headers

\tableofcontents % Print the table of contents itself

\cleardoublepage % Forces the first chapter to start on an odd page so it's on the right

\pagestyle{fancy} % Print headers again

%----------------------------------------------------------------------------------------
%	CHAPTER 1
%----------------------------------------------------------------------------------------

\chapterimage{temp.pdf} % Chapter heading image

\chapter{Introduction}
% Evolution has honed the ability of our visual systems to interpret visual snapshots, or images of our environments, that are sensed by our eyes.
Persuading our sophisticated visual systems of the ``realism'' of computer graphics imagery is a challenging task. 
This problem is exacerbated by the presence of fantastic objects and/or characters embedded in the virtual scene, thereby loosening the notion of realism in the resulting depiction. 
Realistic depiction is typically achieved by an artful combination of design considerations such as the degree of detail in geometrical modelling of objects in the environment, application of plausible models for dynamics and animation of thes objects, the choice of display technology used to present the visuals to the observer, etc. 

While the totality of the above decisions impacts the illusion of reality, the focus of this course is on a vital component in the pipeline --- \textit{the synthesis of photorealistic images} given the various models that describe the environment. The state of the art in the generation of plausible pictures -- which we will henceforth refer to as \textit{rendering} --  involves simulation of the physics of light.
Rendering is a computationally expensive process that needs to be performed repetitively, on every frame, to generate a video sequences.



\section{Rendering}\index{Rendering}
We refer to rendering as the process of producing a picture which represents a particular view of an environment, captured using a virtual camera, at a given time. The input to the rendering system, or renderer, is a detailed representation of all the objects in the scene. This representation is typically provided in a \textit{scene description file} that specifies the objects in the scene, their shapes, their material properties (rough, smooth, shiny, diffuse, translucent, etc.), their motion parameters and whether these objects emit light energy. In addition to the environment, the renderer is also provided with a description of the virtual camera used to capture the rendered view including its position, orientation, optical characteristics (any lenses, aperture, etc.), shutter parameters (exposure time)  and parameters of the virtual sensor (aspect ratio, optical sensitivity, etc.) embedded within it. 

The goal of rendering is to estimate the quantity of radiant light energy impinging on the various pixels (or cells) on the virtual observer's camera (or eye). Current renderers perform this via physically-based simulation of light, following its intricate combinations of reflections within the scene. The virtual measurement \Ij {\xs} at a point \xs\  on the sensor~\cite{VeachChapter8} is
\begin{eqnarray} \label{eq:measeq}
 \Ij {\xs} & = & \DefInt{\Omega}{}{f_\xs(\pth)}{\mu(\pth)}
\end{eqnarray}
where the measurement contribution function, $f_\xs(\pth)$, is the importance-weighted radiance arriving at \xs\ along the path \pth\ and $\mu(\pth)$ is a measure on the space of all paths $\Omega$. The paths \pth\ span space as well as time and may be of arbitrarily high dimensionality. Thus, physically-based rendering requires the esimation of high-dimensional integrals at each point \xs\ on the virtual sensor. 

\TBC

\section{The interplay between reconstruction and integration}\index{Reconstruction and integration}
Images are typically represented and displayed on a regular grid. Rendering algorithms, however, may estimate virtual measurements at arbitrarily points on the sensor. We refer to the process of resampling the measurements \Ij{}\ on a regular grid as \textit{2D reconstruction}. Some rendering algorithms~\cite{MDAS,Egan09,Soleretal09} partition the space of paths ($\Omega$ in equation~\ref{eq:measeq}) explicitly into dimensions that are dependent on the camera, such as exposure time and aperture, and those that depend on the scene. Since the sensor is two-dimensional, exposure time is one-dimensional and the aperture is two-dimensional, they estimate virtual measurements in a five-dimensional, camera-dependent space. This involves a reconstruction in 5D followed by a further projection (integration) down to the two-dimensional plane of the sensor. Such a partitioning is exploited for efficient rendering of camera-dependent blur effects due to fast motion or defocus.

\TBC

\section{The role of sampling}\index{The role of sampling}
There are two distinctly different applications of sampling in the rendering process. One of them is for reconstruction, either in 2D or in 5D (as described above), and the other is for estimation of the integral in equation~\ref{eq:measeq}. Most rendering algorithms focus on the latter and perform reconstruction on a two-dimensional regular grid of pixels. A popular rendering method, called path-tracing, proceeds by estimating the virtual image measurement at each pixel by averaging the values of the measurement contribution function at a chosen set of paths through the pixels. This set of paths may either be sampled stochastically (Monte Carlo sampling) from amongst all paths through each pixel or based on deterministically sampled paths (Quasi-Monte Carlo). The properties of estimates yielded by these two broad classes of algorithms are strikingly different, as is the mathematical machinery used for their analyses.  

\TBC

\section{Sources and manifestation of error}\index{Error in rendering}
The rendered image is represented on a discrete grid, while the distribution of the underlying light energy across the sensor is a continuous function. One potential source of error stems from this discretization. Recall that the true continuous function is a high-dimensional integral at each point on the sensor (equation~\ref{eq:measeq}). Any sampling-based approach used to estimate this function results in an approximation whose measured deviation from the true function is known referred to as \textit{approximation error}. Typically approximation error manifests itself in rendered images in one of two perceivably objectionable forms: structured artifacts or as noise. Various metrics, such as L1 norms, L2 norms, PSNR, etc., are used to quantify approximation error.

\TBC 

%----------------------------------------------------------------------------------------
%	CHAPTER 2
%----------------------------------------------------------------------------------------
\chapter{Mathematical preliminaries}
We review relevant mathematical concepts and introduce the notation adopted in this course.
\begin{table}[hbpt]%
\caption{\label{tab:notation}%
Notation used in this course.}%
\begin{tabular}{rl}%
    \toprule
    Symbol & Definition\\
    \midrule
    \ifn 	&  integrand \\
    $\w(x)$	&  sample weights\\
    \sdn 	&  sampling distribution (pdf) \\
    \estim{\N} 	&  estimate of $I$  using \N\ samples \\
%     \estim{is,\N} 	&  \N-sample importance sampling estimator\\
%     \estim{is,1} 	&  primary (1-sample) imp. samp. estimator\\
    \RV X, \RV Y, \xii, \yii & random variates \\
    $\Exp{\phi(\RV X)}$ 		&
      Expectation: $\DefIntT{\Dom}{}{x\;\phi(x)}{x}$\\[-2pt]
    $\Var{\phi(\RV X)} $ 						&
      Variance : $\DefIntT{\Dom}{}{x\;\phi^2(x)}{x} -
      \DefIntT{\Dom}{}{x\;\phi(x)}{x}$\\
    $\Expf{\phi(\RV X)}{\sdsym} $ &
      Expectation with $ \RV X \sim \sdn$:
$\DefIntT{\Dom}{}{\phi(x)\;\sdsym(x)}{x}$\\[-2pt]
% $\Exp{\phi^2(\RV X)} - \Exp{\phi(\RV X)}^2$\\
    $\Varf{\phi(\RV X)}{\sdsym} $					&
Variance with $ \RV X \sim \sdn$:
  $\DefIntT{\Dom}{}{\phi^2(x)\sdn}{x} -
      (\DefIntT{\Dom}{}{\phi(x)\sdn}{x})^2$\\
\bottomrule
\end{tabular}
\end{table}

\section{Random variables, expectation and variance}
For the purpose of this course, it will suffice to think of random variates simply as variables whose value is subject to chance. We will restrict ourselves to continuous random variables, dnoted using bold capital letters (\RV X, \yii,~etc.), that assume values in some domain \Dom. The relative likelihood for these random variables to take on a given value is specified using a (normalized) probability density function (pdf) $\sdsym: \Dom \rightarrow \R$. We denote that \RV X\ is distributed according to \sdn\ by $\RV X \sim \sdn$. The probability that the random variable lies in a subdomain $\Domi{i} \subset \Dom$ is obtained as 
% \begin{equation}
  $\Prob(\RV X \in \Domi{i}) = \DefIntT{\Domi{i}}{}{\sdn}{x}.$
% \end{equation}

A function $\phi:\Dom\rightarrow\R$ evaluated at a location specified by a random variable, $\phi(\RV X)$, is also a random variable. For formal definitions of random variables and functions of random variables, we refer interested readers to standard mathematical textbooks on probability~\cite{ProbTextBook}.
In this course, we are primarily concerned by the first two moments of random variables (specifically functions of random variables). The first moment, or ``average value'' of a random variable is captured by the mathematical concept of the \textit{expected value} of the random variable. We denote the expected value of \RV X\ as 
$ \Expf{\phi(\RV X)}{\sdsym}   \equiv \DefIntT{\Dom}{}{\phi(x)\;\sdsym(x)}{x}$. 

If the pdf has an expected value, the variance of the random variable is its second central moment which we denote
$\Varf{\phi(\RV X)}{\sdsym} \equiv \Expf{\phi^2(\RV X)}{\sdsym} - \Expf{\phi(\RV X)}{\sdsym}^2$. 
When \RV {X}\ is distributed uniformly within the domain (i.e.~\sdn\ is a constant), we drop the subscript and write the expectation as \Exp{\phi(\RV X)} and the variance as \Var{\phi(\RV X)}.

\TBC 

\section{Estimators}
Consider Monte Carlo estimation of the multidimensional integral $ I = \DefIntT{\Dom}{}{\ifn}{x}, \; \x\in\Dom $.A simple \emph{primary} MC estimator for $I$ is
$\estim{1}\equiv\ifsym(\RV X) , \;\RV X \in \Dom$. When \RV X\ is distributed
uniformly, the estimator is unbiased. That is, its expected value is the integral:$\Exp{\estim{1}}=\Ival$. The function \ifsym(\RV X)\ is itself a random variable with an arbitrary distribution and, typically, a large variance. A more practical MC estimator is obtained by averaging a fixed number of (say \N) primary estimates:  $\estim{\N} = \sum \ifni/\N, \; i=1,2,...,\N$. Such \emph{secondary estimators}  are known to be unbiased and Gaussian-distributed when the primary estimator has finite variance. 

\TBC 

\section{The continuous Fourier transform}
\TBC 

\section{Fourier series}
\TBC 

\section{The Discrete Fourier transform}
\TBC 

\section{The Fast Fourier transform}
\TBC 

%----------------------------------------------------------------------------------------
%	CHAPTER 3
%----------------------------------------------------------------------------------------
\chapter{Image reconstruction}

\section{The visual system and perceptual reconstruction}
\section{Aliasing and error}
\section{Quantitative assessment}
\section{Antialiasing}

%----------------------------------------------------------------------------------------
%	CHAPTER 4
%----------------------------------------------------------------------------------------
\chapter{Estimating integrals}

\section{Numerical integration via sampling}
\section{Error and convergence}
\section{Error in the Fourier domain due to sampling}
\section{Uncertainty of estimates}
\section{Assessing sampling patterns based on their spectra}
\section{Analysis beyond the canonical domain}
\subsection{Spherical domain}
\subsection{General domain}
\subsection{Gradient domain}

%----------------------------------------------------------------------------------------
%	CHAPTER 5
%----------------------------------------------------------------------------------------
\chapter{Popular sampling strategies}

\section{Classical}
\subsection{Random sampling}
\subsection{Jittered sampling}
\subsection{Uniform jittered sampling}

\section{Quasi-Monte Carlo}
\subsection{Sobol sequence}
\subsection{Hammersley sequence}
\subsection{Latin hypercube sampling}

\section{Blue noise}
\subsection{Poisson-disk sampling}
\subsection{CCVT sampling}
\subsection{Tiling-based methods}

\section{Synthesis of sampling patterns with targeted spectral profiles}

%----------------------------------------------------------------------------------------
%	CHAPTER 6
%----------------------------------------------------------------------------------------
\chapter{Case studies}
\section{1D integrands}
\subsection{Smooth functions}
\subsection{Functions with discontinuities}
\section{2D integrands}
\subsection{Smooth functions}
\subsection{Sub-pixel integration}
\subsection{Functions with discontinuities}
\section{Rendering test suite}

% 
% \section{Figure}\index{Figure}
% 
% \begin{figure}[h]
% \centering\includegraphics[scale=0.5]{placeholder}
% \caption{Figure caption}
% \end{figure}

%----------------------------------------------------------------------------------------
%	BIBLIOGRAPHY
%----------------------------------------------------------------------------------------

\chapter*{Bibliography}
\addcontentsline{toc}{chapter}{\textcolor{ocre}{Bibliography}}
\section*{Books}
\addcontentsline{toc}{section}{Books}
\printbibliography[heading=bibempty,type=book]
\section*{Articles}
\addcontentsline{toc}{section}{Articles}
\printbibliography[heading=bibempty,type=article]

%----------------------------------------------------------------------------------------
%	INDEX
%----------------------------------------------------------------------------------------

\cleardoublepage
\phantomsection
\setlength{\columnsep}{0.75cm}
\addcontentsline{toc}{chapter}{\textcolor{ocre}{Index}}
\printindex

%----------------------------------------------------------------------------------------

\end{document}